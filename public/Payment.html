
<html>
<head>
    <meta charset="utf-8">
    <title>Redsys Integration</title>
    <script src="https://sis-t.redsys.es:25443/sis/NC/sandbox/redsysV3.js"></script>
</head>
<body>
    <div id="card-form"></div>
    <form name="datos">
        <input type="hidden" id="token" />
        <input type="hidden" id="errorCode" />
        <a href="javascript:alert(document.datos.token.value + '--' + document.datos.errorCode.value)">Ver</a>
    </form>

    <script>
        function merchantValidationEjemplo() {
            // Insertar validaciones propias
            alert("Esto son validaciones propias");
            return true;
        }

        // Listener de recepción de ID de operación
        window.addEventListener("message", function receiveMessage(event) {
            storeIdOper(event, "token", "errorCode", merchantValidationEjemplo);
        });

        function pedido() {
            return "pedido" + Math.floor(Math.random() * 1000 + 1);
        }

        var insiteJSON = {
            id: "card-form",
            fuc: "999008881",
            terminal: "1",
            order: pedido(),
            estiloInsite: "twoRows",
        };

        getInSiteFormJSON(insiteJSON);
    </script>
</body>
</html>
